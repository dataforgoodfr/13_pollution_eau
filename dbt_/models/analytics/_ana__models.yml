version: 2

models:
  - name: ana__resultats_communes
    description: "Resultat des prélevement par commune et par année"
    columns:
      - name: commune_code_insee
        description: "Code INSEE de la commune du point de surveillance"
        type: VARCHAR
      - name: commune_nom
        description: "Nom de la commune du point de surveillance"
        type: VARCHAR
      - name: annee
        description: "Annee du prevelvement"
        type: SMALLINT
      - name: resultat_cvm
        description: "resultat du prélevement cvm (Chlorure de vinyl monomère)"
        type: VARCHAR
        tests:
          - accepted_values:
              values: ["conforme", "non conforme", "non analysé"]


  - name: int__resultats_annee_uid
    description: "Resultat des prélevement par uid ( par année et dernier prélèvement)"
    columns:
      - name: cdreseau
        description: "Code de l'installation (unité de distribution)"
        tests:
          - not_null
      - name: categorie
        description: "Catégorie du paramètre (pesticides, pfas, vcm, nitrates, etc.) selon la classification établie."
        tests:
          - accepted_values:
              values: ["cvm"]
      - name: periode
        description: "Type de resultat"
        type: VARCHAR  
      - name: resultat
        description: "resultat de l'analyse pour la catégorie selectionnée"
        type: VARCHAR