version: 2

models:
  - name: int__resultats_cvm_communes_annuel
    description: "Resultat des analyse par commune /catégorie et par année"
    columns:
      - name: commune_code_insee
        description: "Code INSEE de la commune du point de surveillance"
        type: VARCHAR
      - name: categorie
        description: "Catégorie du paramètre (pesticides, pfas, vcm, nitrates, etc.) selon la classification établie."
        tests:
          - accepted_values:
              values: ["cvm"]
      - name: cdparametresiseeaux
        description: >
          Le code SISE-Eaux du paramètre est un identifiant alphanumérique sur 7 positions maximum, associé à chaque
          paramètre. Lorsque c'est possible, le symbole chimique est retenu comme identifiant (NO3, AS...) pour le rendre
          signifiant.
      - name: periode
        description: "Type de resultat"
        type: VARCHAR
        tests:
          - accepted_values:
              values: ['bilan annuel']
      - name: resultat
        description: "resultat de l'analyse de la catégorie sélectionnée"
        type: VARCHAR
        tests:
          - accepted_values:
              values: ["non quantifié", ">= 0,5 µg/L","< 0,5 µg/L"]
      - name: annee
        description: "Annee du prevelvement"
        type: SMALLINT

  - name: int__resultats_cvm_udi_annuel
    description: "Resultat des prélevements par udi /catégorie et par année"
    columns:
      - name: cdreseau
        description: "Code de l'installation (unité de distribution)"
        tests:
          - not_null
      - name: categorie
        description: "Catégorie du paramètre (pesticides, pfas, vcm, nitrates, etc.) selon la classification établie."
        tests:
          - accepted_values:
              values: ["cvm"]
      - name: cdparametresiseeaux
        description: >
          Le code SISE-Eaux du paramètre est un identifiant alphanumérique sur 7 positions maximum, associé à chaque
          paramètre. Lorsque c'est possible, le symbole chimique est retenu comme identifiant (NO3, AS...) pour le rendre
          signifiant.
      - name: periode
        description: "Type de resultat"
        type: VARCHAR
        tests:
          - accepted_values:
              values: ['bilan annuel']
      - name: resultat
        description: "resultat de l'analyse de la catégorie sélectionnée"
        type: VARCHAR
        tests:
          - accepted_values:
              values: ["non quantifié", ">= 0,5 µg/L","< 0,5 µg/L"]
      - name: annee
        description: "Annee du prevelvement"
        type: SMALLINT
      - name : percent_ko
        description: "Pourcentage de jour > 0,5 µg/L sur la totalité des jours avec l'information connue sur l'année"
        type: FLOAT      



